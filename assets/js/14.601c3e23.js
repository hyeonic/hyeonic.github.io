(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{437:function(t,s,a){t.exports=a.p+"assets/img/1.e625bf0a.png"},438:function(t,s,a){t.exports=a.p+"assets/img/2.b404a1a3.png"},439:function(t,s,a){t.exports=a.p+"assets/img/3.c3283573.png"},440:function(t,s,a){t.exports=a.p+"assets/img/4.61602be7.png"},700:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"ğŸš—-á„á…¡á„€á…³á†«á„á…¡á„€á…³á†«-á„ƒá…©á†¼á„‰á…µá„‰á…¥á†¼-á„‹á…µá„‰á…²-á„’á…¢á„€á…§á†¯á„’á…¡á„€á…µ-5"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš—-á„á…¡á„€á…³á†«á„á…¡á„€á…³á†«-á„ƒá…©á†¼á„‰á…µá„‰á…¥á†¼-á„‹á…µá„‰á…²-á„’á…¢á„€á…§á†¯á„’á…¡á„€á…µ-5"}},[t._v("#")]),t._v(" ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (5)")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (1) - synchronized"),n("OutboundLink")],1),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-2.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (2) - Pessimistic Lock"),n("OutboundLink")],1),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-3.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (3) - Optimistic Lock"),n("OutboundLink")],1),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-4.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (4) - Named Lock"),n("OutboundLink")],1),t._v(" "),n("br"),t._v("\nğŸ‘‰ "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-5.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (5) - Spinlock"),n("OutboundLink")],1),t._v(" "),n("br")])]),t._v(" "),n("blockquote",[n("p",[t._v("ì‘ì„±ì— ì‚¬ìš©ëœ ì˜ˆì œ ì½”ë“œëŠ” "),n("a",{attrs:{href:"https://github.com/hyeonic/blog-code/tree/main/concurrency-spinlock",target:"_blank",rel:"noopener noreferrer"}},[t._v("concurrency-spinlock"),n("OutboundLink")],1),t._v("ì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.")])]),t._v(" "),n("h2",{attrs:{id:"á„‰á…³á„‘á…µá†«á„…á…¡á†¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„‰á…³á„‘á…µá†«á„…á…¡á†¨"}},[t._v("#")]),t._v(" ìŠ¤í•€ë½")]),t._v(" "),n("p",[t._v("ì´ë²ˆ ì‹œê°„ì—ëŠ” "),n("code",[t._v("Redis")]),t._v("ë¥¼ í™œìš©í•œ ìŠ¤í•€ë½ ë°©ì‹ìœ¼ë¡œ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•´ë³´ë ¤ í•œë‹¤. ìŠ¤í•€ë½ì€ "),n("code",[t._v("Redis")]),t._v("ì˜ "),n("code",[t._v("SETNX")]),t._v(" ëª…ë ¹ì–´ë¥¼ í†µí•´ "),n("code",[t._v("ë¶„ì‚°ë½")]),t._v("ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[n("code",[t._v("SETNX")]),t._v("ëŠ” "),n("code",[t._v("SET")]),t._v(" if "),n("code",[t._v("N")]),t._v("ot e"),n("code",[t._v("X")]),t._v("istsì˜ ì¤€ë§ì´ë‹¤. í‚¤ê°€ ì—†ëŠ” ë¬¸ìì—´ ê°’ì„ ìœ ì§€í•˜ë„ë¡ í‚¤ë¥¼ ì„¤ì •í•œë‹¤. ì´ ê²½ìš°ì—ëŠ” "),n("code",[t._v("SET")]),t._v("ê³¼ ë™ì¼í•˜ë‹¤. ì°¨ì´ì ì€ í‚¤ê°€ ì´ë¯¸ ê°’ì„ ë³´ìœ í•˜ê³  ìˆëŠ” ê²½ìš° ì‘ì—…ì´\nìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰ ì´ê²ƒì„ í†µí•´ ë¶„ì‚°ë½ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# redis-cli\n127.0.0.1:6379> SETNX 1 lock\n(integer) 1 // ë½ íšë“\n127.0.0.1:6379> SETNX 1 lock\n(integer) 0 // ë½ íšë“ ì‹¤íŒ¨\n")])])]),n("blockquote",[n("p",[n("code",[t._v("SET")]),t._v("ì€ ê°€ì¥ ê¸°ë³¸ì ì¸ ë°ì´í„° ì…ë ¥ í˜•íƒœë¡œ í‚¤ì™€ ê°’ì„ ì…ë ¥í•œë‹¤. ë§Œì•½ í‚¤ê°€ ì´ë¯¸ ì§€ì •ë˜ì–´ ìˆë‹¤ë©´ ë®ì–´ì”Œì›Œ ì§„ë‹¤.")])]),t._v(" "),n("p",[t._v("ë ˆë””ìŠ¤ë¥¼ í™œìš© í–ˆì„ ë•Œì˜ ê°€ì¥ í° ì¥ì ì€ ë””ìŠ¤í¬ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ëŠ” ê²ƒ ì´ê¸° ë•Œë¬¸ì— ë” ë¹ ë¥´ê²Œ ë½ì„ íšë“í•˜ê³  í•´ì œí•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"redis-á„‹á…´á„Œá…©á†«á„‰á…¥á†¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-á„‹á…´á„Œá…©á†«á„‰á…¥á†¼"}},[t._v("#")]),t._v(" Redis ì˜ì¡´ì„±")]),t._v(" "),n("p",[t._v("ë‹¤ë¥¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ë ˆë””ìŠ¤ í”„ë¡œí† ì½œ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. Javaì—ëŠ” ëŒ€í‘œì ìœ¼ë¡œ "),n("code",[t._v("Jedis")]),t._v(", "),n("code",[t._v("lettuce")]),t._v(", "),n("code",[t._v("Redisson")]),t._v(" ë“±ì´ ì¡´ì¬í•œë‹¤.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(437),alt:"img.png"}})]),t._v(" "),n("p",[t._v("ë¨¼ì € ìŠ¤í”„ë§ì—ì„œ ë ˆë””ìŠ¤ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.springframework.boot:spring-boot-starter-data-redis'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ëŒ€ê·œëª¨ Spring Data ì œí’ˆêµ°ì˜ ì¼ë¶€ì¸ "),n("code",[t._v("Spring Data Redis")]),t._v("ëŠ” ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ êµ¬ì„±í•˜ê³  ë ˆë””ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. ì´ê²ƒì€ ì €ì¥ì†Œì™€ ìƒí™” ì‘ìš©í•˜ê¸° ìœ„í•´ ë‚®ì€ ìˆ˜ì¤€ê³¼ ë†’ì€\nìˆ˜ì¤€ì˜ ì¶”ìƒí™”ë¥¼ ëª¨ë‘ ì œê³µí•˜ê³  ìˆë‹¤. ìœ„ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©´ ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ "),n("code",[t._v("lettuce")]),t._v("ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì¶”ê°€ëœë‹¤.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(438),alt:"img.png"}})]),t._v(" "),n("p",[n("code",[t._v("Lettuce")]),t._v("ëŠ” ë™ê¸°ì‹, ë¹„ë™ê¸°ì‹ ë° reactive ì‚¬ìš©ì„ ìœ„í•œ í™•ì¥ ê°€ëŠ¥í•œ ìŠ¤ë ˆë“œ ì•ˆì „í•œ ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸ì´ë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"redistemplate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redistemplate"}},[t._v("#")]),t._v(" RedisTemplate")]),t._v(" "),n("p",[t._v("ë ˆë””ìŠ¤ ë°ì´í„° ì ‘ê·¼ ì½”ë“œë¥¼ ë‹¨ìˆœí™”í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” í´ë˜ìŠ¤ì´ë‹¤. ë ˆë””ìŠ¤ ì €ì¥ì†Œì—ì„œ ì§€ì •ëœ ê°ì²´ì™€ ê¸°ë³¸ ì´ì§„ ë°ì´í„° ê°„ì— ìë™ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.\nê¸°ë³¸ì ìœ¼ë¡œ "),n("code",[t._v("JdkSerializationRedisSerializer")]),t._v("ì„ í†µí•´ ê°ì²´ì— Java ì§ë ¬í™”ë¥¼ ì‚¬ìš©í•œë‹¤. ë¬¸ìì—´ ì§‘ì¤‘ ì‘ì—…ì˜ ê²½ìš° ì „ìš© "),n("code",[t._v("StringRedisTemplate")]),t._v("ë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[n("code",[t._v("RedisTemplate")]),t._v("ì€ ë ˆë””ìŠ¤ê°€ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ "),n("code",[t._v("opsForXXX()")]),t._v("ì™€ ê°™ì€ í˜•íƒœì˜ ë©”ì„œë“œê°€ ì¡´ì¬í•œë‹¤.")]),t._v(" "),n("p",[t._v("ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” "),n("code",[t._v("redis command")]),t._v("ì— ëŒ€ì‘í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ "),n("code",[t._v("operation")]),t._v(" ê°ì²´ê°€ ë°˜í™˜ëœë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueOperations")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" valueOperations "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[n("code",[t._v("opsForValue()")]),t._v(": "),n("code",[t._v("ValueOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForHash()")]),t._v(": "),n("code",[t._v("HashOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForList()")]),t._v(": "),n("code",[t._v("ListOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForSet()")]),t._v(": "),n("code",[t._v("SetOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForZSet()")]),t._v(": "),n("code",[t._v("ZSetOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForStream()")]),t._v(": "),n("code",[t._v("StreamOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForGeo()")]),t._v(": "),n("code",[t._v("GeoOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForHyperLogLog()")]),t._v(": "),n("code",[t._v("HyperLogLogOperations")])]),t._v(" "),n("li",[n("code",[t._v("opsForCluster()")]),t._v(": "),n("code",[t._v("ClusterOperations")])])]),t._v(" "),n("p",[t._v("ë¶„ì‚°ë½ êµ¬í˜„ì„ ìœ„í•´ì„œëŠ” ê°„ë‹¨íˆ "),n("code",[t._v("ë¬¸ìì—´")]),t._v("ì„ í™œìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. MySQLì˜ ë„¤ì„ë“œ ë½ê³¼ ë™ì¼í•˜ê²Œ íŠ¹ì • ë¬¸ìì—´ì„ "),n("code",[t._v("SETNX")]),t._v("ë¥¼ í†µí•´ ë½ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[t._v("ì•„ë˜ëŠ” ì‹¤ì œ ë½ì„ íšë“í•˜ê³  í•´ì œí•˜ê¸° ìœ„í•œ "),n("code",[t._v("LockRepository")]),t._v("ì´ë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisLockRepository")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringRedisTemplate")]),t._v(" redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisLockRepository")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringRedisTemplate")]),t._v(" stringRedisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redisTemplate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stringRedisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIfAbsent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateKey")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lock"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMillis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3_000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateKey")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateKey")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[n("code",[t._v("StringRedisTemplate")]),t._v(": RedisTemplateì˜ ë¬¸ìì—´ ì¤‘ì‹¬ì˜ í´ë˜ìŠ¤ì´ë‹¤. ë ˆë””ìŠ¤ì— ëŒ€í•œ ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì€ ë¬¸ìì—´ ê¸°ë°˜ì´ê¸° ë•Œë¬¸ì— ì´ í´ë˜ìŠ¤ëŠ” íŠ¹íˆ ì§ë ¬í™” ë³€í™˜ê¸° ì¸¡ë©´ì—ì„œ ë³´ë‹¤ ì¼ë°˜ì ì¸ í…œí”Œë¦¿ì˜\nêµ¬ì„±ì„ ìµœì†Œí™”í•˜ëŠ” ì „ìš© í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤.")]),t._v(" "),n("li",[n("code",[t._v("lock()")]),t._v(": ë½ íšë“ì„ ìœ„í•œ ë©”ì„œë“œì´ë‹¤. ë½ íšë“ì— ì„±ê³µí•˜ë©´ "),n("code",[t._v("true")]),t._v(", ì‹¤íŒ¨í•˜ë©´ "),n("code",[t._v("false")]),t._v("ë¥¼ ë°˜í™˜í•œë‹¤.")]),t._v(" "),n("li",[n("code",[t._v("opsForValue()")]),t._v(": ë‹¨ìˆœ ê°’ì— ëŒ€í•´ ìˆ˜í–‰ëœ ì‘ì—…ì„ ë°˜í™˜í•œë‹¤.")]),t._v(" "),n("li",[n("code",[t._v("setIfAbsent()")]),t._v(": í‚¤ê°€ ì—†ëŠ” ê²½ìš° ë¬¸ìì—´ valueë¥¼ ë³´ìœ í•˜ë„ë¡ í‚¤ë¥¼ ì„¤ì •í•œë‹¤. "),n("code",[t._v("SETNX")]),t._v(" ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨ëœë‹¤. íŠ¹ë³„í•œ ì¡°ì¹˜ê°€ ì—†ë‹¤ë©´ ë ˆë””ìŠ¤ì˜ í‚¤ëŠ” ì‚­ì œê°€ ì•„ë‹Œ ë³´ê´€ ì²˜ë¦¬ëœë‹¤.\nì¶”ì¸¡í•˜ê¸°ë¡œëŠ” timeout ì‹œê°„ì„ ì§€ì •í•˜ì—¬ ìë™ì ìœ¼ë¡œ í‚¤ë¥¼ ì œê±°í•˜ì—¬ ë½ì´ ì˜¤ëœì‹œê°„ ì¡íˆëŠ” ê²ƒì„ ë§‰ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¸¡ëœë‹¤.")]),t._v(" "),n("li",[n("code",[t._v("unlock()")]),t._v(": ë½ì„ í•´ì œí•œë‹¤.")])]),t._v(" "),n("p",[t._v("ë½ì„ íšë“í•œ ë’¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ê³  ë½ì„ í•´ì œí•˜ê¸° ìœ„í•œ "),n("code",[t._v("Facade")]),t._v("ë¥¼ ì¶”ê°€í•œë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LockProductFacade")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisLockRepository")]),t._v(" redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LockProductFacade")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisLockRepository")]),t._v(" redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redisLockRepository "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ì ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•´ë³´ì.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootTest")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@DisplayNameGeneration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReplaceUnderscores")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpinlockProductFacadeTest")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductRepository")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpinlockProductFacade")]),t._v(" spinlockProductFacade"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpinlockProductFacadeTest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductRepository")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                              "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpinlockProductFacade")]),t._v(" spinlockProductFacade"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productRepository "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spinlockProductFacade "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" spinlockProductFacade"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" ë™ì‹œì—_100ê°œì˜_ìƒí’ˆì„_êµ¬ë§¤í•œë‹¤"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" product "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ì¹˜í‚¨"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" executorService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" countDownLatch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            executorService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("await")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" actual "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElseThrow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("actual"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQuantity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEqualTo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" ìƒí’ˆì˜_ìˆ˜ëŸ‰ì€_100ê°œ_ì´ì§€ë§Œ_ë™ì‹œì—_200ê°œì˜_ìƒí’ˆì„_êµ¬ë§¤í•œë‹¤"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" product "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ì¹˜í‚¨"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" executorService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" countDownLatch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            executorService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("await")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" actual "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElseThrow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("actual"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQuantity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEqualTo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            spinlockProductFacade"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("countDown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(439),alt:"img.png"}})]),t._v(" "),n("p",[t._v("ì•„ì‰½ê²Œë„ ì‹¤íŒ¨í•œë‹¤. ìœ„ ë°©ì‹ì„ í™œìš©í•˜ë©´ ë½ ì‹¤íŒ¨ ì‹œ ì¶”ê°€ì ì¸ ì¬ì‹œë„ ë¡œì§ì„ ì‘ì„±í•´ì•¼ í•œë‹¤. ë³´í†µì€ íŠ¹ì • ì‹œê°„ ì´í›„ ì¬ìš”ì²­ì„ í•  ìˆ˜ ìˆëŠ” "),n("code",[t._v("ìŠ¤í•€ë½ ë°©ì‹")]),t._v("ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"á„‰á…³á„‘á…µá†«á„…á…¡á†¨-á„Œá…¥á†¨á„‹á…­á†¼á„’á…¡á„€á…µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„‰á…³á„‘á…µá†«á„…á…¡á†¨-á„Œá…¥á†¨á„‹á…­á†¼á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" ìŠ¤í•€ë½ ì ìš©í•˜ê¸°")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpinlockProductFacade")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisLockRepository")]),t._v(" redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpinlockProductFacade")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisLockRepository")]),t._v(" redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redisLockRepository "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            redisLockRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ë¡œì§ì€ ê°„ë‹¨í•œë‹¤. ìŠ¤í•€ë½ì„ í†µí•´ ë½ì´ íšë“ê°€ëŠ¥í•œì§€ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸ í›„ ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤. ë¡œì§ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©´ ë½ì„ í•´ì œí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— "),n("code",[t._v("finally")]),t._v("ë¡œ ë½ì„ í•´ì œí•œë‹¤.")]),t._v(" "),n("p",[t._v("í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ í†µê³¼í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(440),alt:"img.png"}})]),t._v(" "),n("h2",{attrs:{id:"á„Œá…¥á†¼á„…á…µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„Œá…¥á†¼á„…á…µ"}},[t._v("#")]),t._v(" ì •ë¦¬")]),t._v(" "),n("p",[t._v("ì§€ê¸ˆ ê¹Œì§€ ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸ì¸ "),n("code",[t._v("lettuce")]),t._v("ë¥¼ í™œìš©í•˜ì—¬ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•˜ì˜€ë‹¤. "),n("code",[t._v("lettuce")]),t._v("ëŠ” Spring Data Redis ì˜ì¡´ì„± ì¶”ê°€ ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ê¸° ë•Œë¬¸ì— ê°„í¸í•˜ê²Œ ì ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ë½ íšë“ ë° ë°˜ë‚© ë¡œì§ì„ ê°œë°œìê°€ ì§ì ‘ ì‘ì„±í•´ì•¼ í•œë‹¤.")]),t._v(" "),n("p",[t._v("ë˜í•œ ë½ íšë“ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ë¥¼ ìœ„í•œ ë¡œì§ê¹Œì§€ êµ¬í˜„í•´ì•¼ í•œë‹¤. ëŒ€í‘œì ìœ¼ë¡œëŠ” ìŠ¤í•€ë½ì„ í™œìš©í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ìŠ¤í•€ë½ ë°©ì‹ìœ¼ë¡œë„ ì¶©ë¶„íˆ ë™ì‹œì„± ì´ìŠˆê°€ í•´ê²°ë˜ì§€ë§Œ ë ˆë””ìŠ¤ ì„œë²„ì— ì§€ì†ì ì¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ë•Œë¬¸ì— ë¶€í•˜ê°€ ì˜¬ ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[t._v("ë‹¤ìŒ ì‹œê°„ì—ëŠ” "),n("code",[t._v("pub/sub")]),t._v(" ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ë½ì„ êµ¬í˜„í•˜ëŠ” ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸ "),n("code",[t._v("Redisson")]),t._v("ì„ í™œìš©í•˜ì—¬ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•´ë³´ë ¤ í•œë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"references"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References.")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://redis.io/commands/setnx",target:"_blank",rel:"noopener noreferrer"}},[t._v("SETNX"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://docs.spring.io/spring-data/redis/docs/current/api/org/springframework/data/redis/core/BoundValueOperations.html#setIfAbsent(V,java.time.Duration)",target:"_blank",rel:"noopener noreferrer"}},[t._v("setIfAbsent()"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://redis.io/resources/clients/#java",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis client"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://github.com/lettuce-io/lettuce-core",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lettuce - Advanced Java Redis client"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://luvstudy.tistory.com/143",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot Data Redis ì‚¬ìš©í•´ë³´ê¸°"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);