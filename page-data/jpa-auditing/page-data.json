{"componentChunkName":"component---src-templates-post-jsx","path":"/jpa-auditing/","result":{"data":{"site":{"siteMetadata":{"title":"나누면 배가 되고"}},"markdownRemark":{"id":"5a61e41a-16ff-5669-bf0e-028ea40e0af3","excerpt":"Spring Data JPA Auditing 작성에 사용된 예제 코드는 jpa-auditing에서 확인해볼 수 있다. 언어는 kotlin으로 작성하였다. Spring Data는 엔티티를 하거나 과 를 투명하게 추적할 수 있는 정교한 지원을 제공한다.\n해당 기능을 사용하기 위해서는 애노테이션을 사용하거나 인터페이스를 구현하여 정의할 수 있는 auditing…","html":"<h2>Spring Data JPA Auditing</h2>\n<blockquote>\n<p>작성에 사용된 예제 코드는 <a href=\"https://github.com/hyeonic/blog-code/tree/main/jpa-auditing\">jpa-auditing</a>에서 확인해볼 수 있다. 언어는 kotlin으로 작성하였다.</p>\n</blockquote>\n<p>Spring Data는 엔티티를 <code class=\"language-text\">생성</code>하거나 <code class=\"language-text\">변경한 사람</code>과 <code class=\"language-text\">변경이 발생한 시기</code>를 투명하게 추적할 수 있는 정교한 지원을 제공한다.\n해당 기능을 사용하기 위해서는 애노테이션을 사용하거나 인터페이스를 구현하여 정의할 수 있는 auditing metadata를 제공해야 한다.</p>\n<p>아래는 간단한 예시를 위한 Member 엔티티이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Entity</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">Member</span><span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">BaseEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Id</span>\n    <span class=\"token annotation builtin\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> GenerationType<span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> id<span class=\"token operator\">:</span> Long<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@Column</span>\n    <span class=\"token keyword\">var</span> name<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> name\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>사용 방법은 정말 간단하다. 애노테이션만 몇 개 추가해주면 자동으로 생성과 수정 시점에 따라 값이 수정된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@EntityListeners</span><span class=\"token punctuation\">(</span>AuditingEntityListener<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@Entity</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">Member</span><span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">BaseEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Id</span>\n    <span class=\"token annotation builtin\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> GenerationType<span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> id<span class=\"token operator\">:</span> Long<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@Column</span>\n    <span class=\"token keyword\">var</span> name<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> name\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@CreatedDate</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> updatable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> createdDate<span class=\"token operator\">:</span> LocalDateTime <span class=\"token operator\">=</span> LocalDateTime<span class=\"token punctuation\">.</span>MIN\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@LastModifiedDate</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> lastModifiedDate<span class=\"token operator\">:</span> LocalDateTime <span class=\"token operator\">=</span> LocalDateTime<span class=\"token punctuation\">.</span>MIN\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@CreatedBy</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> updatable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> createdBy<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> DEFAULT_MEMBER_NAME\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@LastModifiedBy</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> lastModifiedBy<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> DEFAULT_MEMBER_NAME\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token keyword\">val</span> DEFAULT_MEMBER_NAME <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"default\"</span></span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>이번 글에서는 Auditing 기능에만 집중할 예정이므로 Kotlin과 JPA와 관련한 내용은 생략한다.</p>\n</blockquote>\n<ul>\n<li><code class=\"language-text\">@EntityListeners(AuditingEntityListener::class)</code>: Spring Data JPA는 auditing 정보 캡처를 트리거할 때 사용할 수 있는 <code class=\"language-text\">EntityListener</code>와\n함께 제공된다. 사용할 엔티티에 <code class=\"language-text\">AuditingEntityListener</code>를 등록한다. 자세한 동작과정은 이후 살펴본다. 우선 auditing 기능을 위해서는 리스너를 등록해야 한다는 것만 알아두자.</li>\n<li><code class=\"language-text\">@CreatedDate</code>: 엔티티가 생성되어 저장될 때 시간이 자동으로 저장된다.</li>\n<li><code class=\"language-text\">@LastModifiedDate</code>: 엔티티가 변경되면 시간이 자동으로 수정된다.</li>\n<li><code class=\"language-text\">@CreatedBy</code>: 엔티티를 생성한 사람을 자동으로 넣을 수 있다. 해당 기능이 정상 작동하기 위해서는 <code class=\"language-text\">AuditorAware</code>를 빈으로 등록해야 한다. 자세한 사용 방법은 이후 살펴본다.</li>\n<li><code class=\"language-text\">@LastModifiedDate</code>: 엔티티가 변경되면 변경한 사람이 자동으로 수정된다. 정상 작동 방법은 <code class=\"language-text\">@CreatedBy</code>와 동일하게 이후 작성한다.</li>\n</ul>\n<p>엔티티마다 Auditing 기능을 위해 <code class=\"language-text\">createdDate</code>, <code class=\"language-text\">lastModifiedDate</code> 등을 매번 작성하는 것은 중복된 코드를 야기한다. 이것은 상속을 통해 개선이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@MappedSuperclass</span>\n<span class=\"token annotation builtin\">@EntityListeners</span><span class=\"token punctuation\">(</span>AuditingEntityListener<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> BaseEntity <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@CreatedDate</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> updatable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> createdDate<span class=\"token operator\">:</span> LocalDateTime <span class=\"token operator\">=</span> LocalDateTime<span class=\"token punctuation\">.</span>MIN\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@LastModifiedDate</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> lastModifiedDate<span class=\"token operator\">:</span> LocalDateTime <span class=\"token operator\">=</span> LocalDateTime<span class=\"token punctuation\">.</span>MIN\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@CreatedBy</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> updatable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> createdBy<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> DEFAULT_MEMBER_NAME\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@LastModifiedBy</span>\n    <span class=\"token annotation builtin\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> lastModifiedBy<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> DEFAULT_MEMBER_NAME\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token keyword\">val</span> DEFAULT_MEMBER_NAME <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"default\"</span></span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Entity</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">Member</span><span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">BaseEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Id</span>\n    <span class=\"token annotation builtin\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> GenerationType<span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> id<span class=\"token operator\">:</span> Long<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n\n    <span class=\"token annotation builtin\">@Column</span>\n    <span class=\"token keyword\">var</span> name<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> name\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">set</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">BaseEntity()</code>를 상속하여 Member 엔티티가 더욱 간단해진 것을 확인할 수 있다. 이제 마지막으로 Auditing 기능을 활성화해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Configuration</span>\n<span class=\"token annotation builtin\">@EnableJpaAuditing</span>\n<span class=\"token keyword\">class</span> JpaConfig</code></pre></div>\n<p>보통 Configuration 파일은 각 역할에 맞게 분리하여 관리한다. 이러한 방식의 장점은 슬라이스 테스트를 진행할 때 필요한 설정 빈만 활용하여 테스트를 진행할 수 있다. 자세한\n이유는 <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.spring-boot-applications.user-configuration-and-slicing\">8.3.33. User Configuration and Slicing</a>\n에서 확인할 수 있다.</p>\n<p>아래는 간단한 repository와 service이다.</p>\n<p><strong>MemberRepository.kt</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">interface</span> MemberRepository <span class=\"token operator\">:</span> JpaRepository<span class=\"token operator\">&lt;</span>Member<span class=\"token punctuation\">,</span> Long<span class=\"token operator\">></span></code></pre></div>\n<p><strong>MemberService.kt</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Service</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">MemberService</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> memberRepository<span class=\"token operator\">:</span> MemberRepository\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Transactional</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token operator\">:</span> Member<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Member <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>간단한 테스트 코드를 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> MemberServiceTest <span class=\"token annotation builtin\">@Autowired</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> memberService<span class=\"token operator\">:</span> MemberService\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">`member를 저장한다`</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"hyeoni\"</span></span>\n        <span class=\"token keyword\">val</span> savedMember <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token function\">Member</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getOne</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">.</span>id<span class=\"token operator\">!!</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">Member(id=1, name=hyeoni, createdDate=2023-03-06T22:21:16.911, lastModifiedDate=2023-03-06T22:21:16.911, createdBy=&#39;default&#39;, lastModifiedBy=&#39;default&#39;)</code></pre></div>\n<p><code class=\"language-text\">createdDate</code>와 <code class=\"language-text\">updatedDate</code>를 살펴보면 테스트 시작 시간이 잘 등록된 것을 확인할 수 있다. 추가로 <code class=\"language-text\">createdBy</code>와 <code class=\"language-text\">lastModifiedBy</code>에는 생성 및 수정이 일어날 때\nmember의 name이 기록해야 하는 요구사항이 있다고 가정한다. 현재는 무슨 이유인지 모르겠지만 <code class=\"language-text\">Member Entity</code>에 기본적으로 설정된 값이 출력되는 것을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> MemberServiceTest <span class=\"token annotation builtin\">@Autowired</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> memberService<span class=\"token operator\">:</span> MemberService\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">`member를 저장한다 createdBy와 lastModifiedBy는 member의 name과 같다`</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"hyeoni\"</span></span>\n        <span class=\"token keyword\">val</span> savedMember <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token function\">Member</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getOne</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">.</span>id<span class=\"token operator\">!!</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token function\">assertAll</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>createdBy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>lastModifiedBy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/c29ce12384bcf68034b8d25e3e2d0168/544f7/0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 26.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVR42l3PTUvDQBSF4f4coWmbNJkmk0w+2oQ2tmnTKioqUqX4gQvBhSCILoL+7tebogtdPNwzd3G40zk6LllUBVmRk6YxxoRERgvDJMsIiylRMSFODEWqmcq+iAyJMCYmixMSk+D6GhVoOulyR33+yNnujc32herimXzzwKS+Y9xa3ZLX95SnTwR+zMQesBopVspjNhxSeR5zzyVzbEb9Ph21fieuXzm8/GC9+6LefTLfNixvGiqZizZfN5RXDTosyO0+xnEopcSTgoNul67oda397MTGl9MDwtBHB4pAK8kjtP6r3blyxVjKZlJWKUUqObJtjEgkq/ZCk+W04h//37+ilqeo5aul63IS+FI2YNCzcHq9vYFl8Q30PLA4t46jjwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='0' title='' src='/static/c29ce12384bcf68034b8d25e3e2d0168/ca1dc/0.png' srcset='/static/c29ce12384bcf68034b8d25e3e2d0168/e7570/0.png 170w,\n/static/c29ce12384bcf68034b8d25e3e2d0168/f46e7/0.png 340w,\n/static/c29ce12384bcf68034b8d25e3e2d0168/ca1dc/0.png 680w,\n/static/c29ce12384bcf68034b8d25e3e2d0168/544f7/0.png 684w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>위 테스트는 실패한다. 가정한 요구사항을 수행하기 위해서는 추가적인 설정이 필요하다.</p>\n<h2>AuditorAware</h2>\n<p>이것은 <code class=\"language-text\">AuditorAware</code>의 구현체를 <code class=\"language-text\">Bean</code>으로 등록하여 해결할 수 있다. 요구사항에 맞춰 해당 채워 넣을 값을 세팅한다. 보통은 <code class=\"language-text\">Spring Security</code>의 <code class=\"language-text\">Authentication</code>\n이나 <code class=\"language-text\">Session</code> 등 을 활용하여 구현하곤 한다. 아래는 실제 공식 문서에 있는 간단한 활용 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SpringSecurityAuditorAware</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">AuditorAware</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getCurrentAuditor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Optional</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofNullable</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SecurityContextHolder</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SecurityContext</span><span class=\"token operator\">::</span><span class=\"token function\">getAuthentication</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span><span class=\"token operator\">::</span><span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span><span class=\"token operator\">::</span><span class=\"token function\">getPrincipal</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token operator\">::</span><span class=\"token function\">cast</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>간단한 예제를 위해 스레드별로 요청한 Member의 name을 저장하기 위해 <code class=\"language-text\">ThreadLocal</code>를 가진 <code class=\"language-text\">RequestContext</code>을 활용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> RequestContext <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> currentAuditorStore <span class=\"token operator\">=</span> ThreadLocal<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">var</span> currentAuditor<span class=\"token operator\">:</span> String\n            <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> currentAuditorStore<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?:</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"default\"</span></span>\n            <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>currentAuditor<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                currentAuditorStore<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span> currentAuditorStore<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>currentAuditor<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>정말 간단한 예시이다. 자 이제 service 쪽도 저장하기 직전에 <code class=\"language-text\">RequestContext</code>에 값을 채워둔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Service</span>\n<span class=\"token annotation builtin\">@Transactional</span><span class=\"token punctuation\">(</span>readOnly <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">MemberService</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> memberRepository<span class=\"token operator\">:</span> MemberRepository\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Transactional</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token operator\">:</span> Member<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Member <span class=\"token punctuation\">{</span>\n        RequestContext<span class=\"token punctuation\">.</span>currentAuditor <span class=\"token operator\">=</span> member<span class=\"token punctuation\">.</span>name\n        <span class=\"token keyword\">return</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 <code class=\"language-text\">RequestContext</code>에 저장된 <code class=\"language-text\">name</code>을 활용하여 <code class=\"language-text\">AuditorAware</code>를 구현하고 빈으로 등록한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Configuration</span>\n<span class=\"token keyword\">class</span> JpaConfig <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Bean</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">auditorProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> AuditorAware<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> AuditorAware <span class=\"token punctuation\">{</span>\n            Optional<span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>RequestContext<span class=\"token punctuation\">.</span>currentAuditor<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>자 이제 아래 테스트를 다시 수행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> MemberServiceTest <span class=\"token annotation builtin\">@Autowired</span> <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> memberService<span class=\"token operator\">:</span> MemberService\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">`member를 저장한다 createdBy와 lastModifiedBy는 member의 name과 같다`</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"hyeoni\"</span></span>\n        <span class=\"token keyword\">val</span> savedMember <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token function\">Member</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getOne</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">.</span>id<span class=\"token operator\">!!</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token function\">assertAll</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>createdBy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>lastModifiedBy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e0533262a7b4e30a23b66fb948aba505/1dbb4/1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 27.647058823529413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCUlEQVR42p2Qy2rDMBBF/Tde2Bhi/NLLsmRZjkNIsLNpd6WLUtOUlEJT+vW3stwuCyWLwwwX6Yw0gb17h5ouYPtXlLsZZHdGPV2RTx8gB5cNs6fYzqD7F8jjE7hSULqFkA1KQkEYB+UCeUkQjI9XjA9f2N5/Qo4XcCfhhzPEwnHtfzN1ekN/esZmkyLPc1RVBcYYiqIApRRlWSKQuobtDXpH12lXW1irHWs1Rvm86xRMq8A48ZeNMRiGwZ3vIYTw2TIgYFKB1g7RgNU//R8wqUF4DUIIlPu2tRZaay+P4xhhGCLgTvhfRLMKl5dIKb2obVsv5ZwjSZLbhMv+lt0t4jRNkWWZJ4oifAOTpNSXAlfNWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='1' title='' src='/static/e0533262a7b4e30a23b66fb948aba505/ca1dc/1.png' srcset='/static/e0533262a7b4e30a23b66fb948aba505/e7570/1.png 170w,\n/static/e0533262a7b4e30a23b66fb948aba505/f46e7/1.png 340w,\n/static/e0533262a7b4e30a23b66fb948aba505/ca1dc/1.png 680w,\n/static/e0533262a7b4e30a23b66fb948aba505/1dbb4/1.png 852w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>정상적으로 통과하는 것을 확인할 수 있다.</p>\n<h2>[번외] AuditingEntityListener</h2>\n<p>Auditing 기능이 정상적으로 동작하기 위해서는 <code class=\"language-text\">@EntityListeners(AuditingEntityListener::class)</code>를 통해 리스너를 등록해야 한다. 엔티티의 메서드는 특정 엔티티 라이프\n사이클 이벤트의 알림을 수신하기 위한 콜백 메서드(e.g. <code class=\"language-text\">@PrePersist</code> 등)로 지정될 수 있다. 다만 클래스 단위로 범용적인 사이클 적용을 위해서는 리스너를 활용할 수 있다.</p>\n<p>실제 <code class=\"language-text\">AuditingEntitiyListener</code>를 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configurable</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingEntityListener</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token annotation punctuation\">@PrePersist</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">touchForCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Entity must not be null!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>handler <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">AuditingHandler</span> object <span class=\"token operator\">=</span> handler<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>object <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                object<span class=\"token punctuation\">.</span><span class=\"token function\">markCreated</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@PreUpdate</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">touchForUpdate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Entity must not be null!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>handler <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">AuditingHandler</span> object <span class=\"token operator\">=</span> handler<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>object <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                object<span class=\"token punctuation\">.</span><span class=\"token function\">markModified</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>특정 시점에 <code class=\"language-text\">@PrePersist</code>와 <code class=\"language-text\">@PreUpdate</code>애노테이션이 명시된 메서드를 수행하는 것을 확인할 수 있다.</p>\n<h2>정리</h2>\n<p>지금까지 JPA Auditing 필요성과 사용 방법에 대해 알아보았다. 날짜와 관련한 필드는 <code class=\"language-text\">@CreatedDate</code>와 <code class=\"language-text\">@LastModifiedDate</code> 애노테이션을 통해 정말 빠르게 적용이 가능하다.\n다만 <code class=\"language-text\">@CreatedBy</code>와 <code class=\"language-text\">@LastModifiedBy</code>는 추가적으로 <code class=\"language-text\">AditorAware</code>를 빈으로 등록해야 한다.</p>\n<p>엔티티의 라이프 사이클 이벤트 알림을 수신하기 위한 애노테이션을 사용할 수 있다. 여러 엔티티에서 사용하는 것은 리스너를 생성하여 <code class=\"language-text\">@EntityListeners</code>에 등록한 뒤 사용할 수 있다.</p>\n<h2>References.</h2>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#auditing\">5.1.9. Auditing</a><br></li>\n<li><a href=\"https://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html/listeners.html\">Chapter 6. Entity listeners and Callback methods</a><br></li>\n</ul>","frontmatter":{"title":"Spring Data JPA Auditing","date":"March 08, 2023","update":"March 08, 2023","tags":["kotlin","jpa","auditing"],"series":null},"fields":{"slug":"/jpa-auditing/","readingTime":{"minutes":9.445}}},"seriesList":{"edges":[{"node":{"id":"984809e6-d465-5dfd-9c59-579d12581fac","fields":{"slug":"/immutable-object/"},"frontmatter":{"title":"불변 객체"}}},{"node":{"id":"fa92531f-b76e-587c-a42b-14dedd6e2cb1","fields":{"slug":"/first-class-collection/"},"frontmatter":{"title":"일급 컬렉션"}}},{"node":{"id":"2dac6856-47a1-5ef0-9c9f-d69d4234afcf","fields":{"slug":"/why-jdbc-template/"},"frontmatter":{"title":"JdbcTemplate는 어디에?"}}},{"node":{"id":"ab71a72e-f8d9-55e6-bdd4-66e8778b0b67","fields":{"slug":"/enum/"},"frontmatter":{"title":"enum"}}},{"node":{"id":"b77737b7-c888-54d0-8901-9921b4bbb703","fields":{"slug":"/spring-jdbc-batch/"},"frontmatter":{"title":"Spring JDBC로 batch 활용하기"}}},{"node":{"id":"59e94329-3d48-53b9-9995-90d61432234d","fields":{"slug":"/local-date-time/"},"frontmatter":{"title":"java에서 날짜, 시간 제대로 사용하기"}}},{"node":{"id":"c8dda97d-41c7-5596-a0c8-703fd69d92e7","fields":{"slug":"/identity-strategy/"},"frontmatter":{"title":"IDENTITY 전략는 추가 조회를 하지 않을 수 있다."}}},{"node":{"id":"c50af7e8-5953-5168-b4af-1d186a4254a7","fields":{"slug":"/separated-interface/"},"frontmatter":{"title":"외부와 의존성 분리하기"}}},{"node":{"id":"ba9d009e-d6e8-574f-9f7b-89819e3e57ca","fields":{"slug":"/properties-to-object/"},"frontmatter":{"title":"properties 객체로 다루기"}}},{"node":{"id":"7b780208-a850-5305-a51c-f0937cbdaf93","fields":{"slug":"/google-refresh-token/"},"frontmatter":{"title":"Google은 Refresh Token을 쉽게 내주지 않는다."}}},{"node":{"id":"b886feb1-ab24-59f0-8972-2d2b510ea407","fields":{"slug":"/mappedsuperclass-vs-embedded/"},"frontmatter":{"title":"@MappedSuperclass vs @Embedded"}}},{"node":{"id":"58f32f4d-b2d6-54d6-b3dd-cb4cf4da1d70","fields":{"slug":"/basic-tomcat/"},"frontmatter":{"title":"Tomcat"}}},{"node":{"id":"d26e840e-0646-5dd9-a2d5-5670ddc81ede","fields":{"slug":"/jdbc/"},"frontmatter":{"title":"JDBC"}}},{"node":{"id":"e0a32367-096e-595a-9580-0d3d2fc6e9aa","fields":{"slug":"/template-callback/"},"frontmatter":{"title":"jdbcTemplate을 만들며 마주한 Template Callback 패턴"}}},{"node":{"id":"fa938264-2615-556e-bcfa-d749c30aa8fe","fields":{"slug":"/covering-index/"},"frontmatter":{"title":"커버링 인덱스"}}},{"node":{"id":"cf3a2936-1b1f-5d11-832e-dbb9f8051755","fields":{"slug":"/osiv/"},"frontmatter":{"title":"OSIV와 사용하며 직면한 문제"}}},{"node":{"id":"53859931-2807-5303-a90d-33df33a856de","fields":{"slug":"/save-persist-merge/"},"frontmatter":{"title":"SimpleJpaRepository의 save()는 어떻게 새로운 엔티티를 판단할까?"}}},{"node":{"id":"09a96ca9-bb95-55ab-83cf-d9d053b2ad70","fields":{"slug":"/optimistic-locking/"},"frontmatter":{"title":"낙관적 락과 동시성 테스트"}}},{"node":{"id":"647737e4-08ec-5813-a092-c27ef1da4292","fields":{"slug":"/java-string/"},"frontmatter":{"title":"문자열 생성 방식 비교하기"}}},{"node":{"id":"696ee6ba-c2ea-5e8b-a25f-aaa4eccfa5e9","fields":{"slug":"/2022-retrospect/"},"frontmatter":{"title":"조금 늦은 2022년 회고"}}},{"node":{"id":"5a61e41a-16ff-5669-bf0e-028ea40e0af3","fields":{"slug":"/jpa-auditing/"},"frontmatter":{"title":"Spring Data JPA Auditing"}}}]},"previous":{"fields":{"slug":"/2022-retrospect/"},"frontmatter":{"title":"조금 늦은 2022년 회고"}},"next":null},"pageContext":{"id":"5a61e41a-16ff-5669-bf0e-028ea40e0af3","series":null,"previousPostId":"696ee6ba-c2ea-5e8b-a25f-aaa4eccfa5e9","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}