## 2021.02.08 알고리즘, 오브젝트

## 알고리즘 문제 풀기

[[Baekjoon Online Judge] 1373번: 2진수 8진수](https://hyeonic.tistory.com/98)

[[Baekjoon Online Judge] 11655번: ROT13](https://hyeonic.tistory.com/99)

## 오브젝트

### 14 일관성 있는 협력

 유사한 기능을 구현하기 위해 유사한 협력 패턴을 사용하라. 객체들의 협력이 전체적으로 일관성 있는 유사한 패턴을 따른다면 시스템을 이해하고 확장하기 위해 요구되는 정신적인 부담을 크게 줄일 수 있다.

**01 핸드폰 과금 시스템 변경하기**

 클래스들은 기본 정책을 구현한다는 공통의 목적을 공유한다. 하지만 정책을 구현하는 방식은 완전히 다르다. 다시 말해서 개념적으로는 연관돼 있지만 구현 방식에 있어서는 완전히 제 각각이라는 것이다.

 비 일관성은 두 가지 상황에서 발목을 잡는다, 하나는 새로운 구현을 추가해야 하는 상황이고, 또 다른 하나는 기존의 구현을 이해해야 하는 상황이다.

 결론은 유사한 기능을 서로 다른 방식으로 구현해서는 안 된다는 것이다. 일관성 없는 설계와 마주한 개발자는 여러 가지 해결 방법 중에서 현재의 요구사항을 해결하기에 가장 적절한 방법을 찾아야 하는 부담을 안게 된다.

 유사한 기능은 유사한 방식으로 구현해야 한다. 객체지향에서 기능을 구현하는 유일한 방법은 객체 사이의 협력을 만드는 것뿐이므로 유지보수 가능한 시스템을 구축하는 첫걸음은 협력을 일관성 있게 만드는 것이다.

**02 설계에 일관성 부여하기**

 일관성 있는 설계를 만드는데 가장 훌륭한 조언은 다양한 설계 경험을 익히는 것이다. 풍부한 설계 경험을 가진 사람은 어떤 변경이 중요한지, 그리고 그 변경을 어떻게 다뤄야 하는지에 대한 통찰력을 가지게 된다. 따라서 설계 경험이 풍부하면 풍부할수록 어떤 위치에서 일관성을 보장해야 하고 일관성을 제공하기 위해 어떤 방법을 사용해야 하는지를 직관적으로 결정할 수 있다. 

 일관성 있는 설계를 위하여 널리 알려진 디자인 패턴을 학습하고 변경이라는 문맥 안에서 디자인 패턴을 적용해본다. 디자인 패턴은 특정한 변경에 대해 일관성 있는 설계를 만들 수 있는 경험 법칙을 모아 놓은 일종의 설계 템플릿이다.

 협력을 일관성 있게 만들기 위해 다음과 같은 기본 지침을 따르는 것이 도움이 된다.
- 변하는 개념을 변하지 않는 개념으로부터 분리한다.
- 변하는 개념을 캡슐화 한다.

 바뀌는 부분을 따로 뽑아서 캡슐화 한다. 그렇게 하면 나중에 바뀌지 않는 부분에는 영향을 미치지 않은 채로 그 부분만 고치거나 확장할 수 있다.

**조건 로직 대 객체 탐색**
 객체지향에서 변경을 다루는 전통적인 방법은 조건 로직을 객체 사이의 이동으로 바꾸는 것이다. 다형성은 바로 이런 조건 로직을 객체 사이의 이동으로 바꾸기 위해 객체지향이 제공하는 설계 기법이다.

 객체의 구체적인 종류는 메시지를 수신한 객체의 타입에 따라 달라지며 실행할 메소드를 결정하는 것은 순전히 메시지를 수신한 객체의 책임이다.

 클래스는 명확히 단 하나의 이유에 의해서만 변경돼야 하고 클래스 안의 모든 코드는 함께 변경돼야 한다. 간단하게 말해서 단일 책임 원칙을 따르도록 클래스를 분리해야 한다.


 큰 메소드 안에 뭉쳐 있던 조건 로직들을 변경의 압력에 맞춰 작은 클래스들로 분리하고 나면 인스턴스들 사이의 협력 패턴에 일관성을 부여하기가 더 쉬워진다. 유사한 행동을 수행하는 작은 클래스들이 자연스럽게 역할이라는 추상화로 묶이게 되고 역할 사이에서 이뤄지는 협력 방식이 전체 설계의 일관성을 유지할 수 있게 이끌어 주기 때문이다.

일관성 있는 협력을 위한 지침1
 - 변하는 개념을 변하지 않는 개념으로부터 분리한다.

 변하는 개념을 별도의 서브타입으로 분리한 후 이 서브타입들을 클라이언트로부터 캡슐화한 것이다.

일관성 있는 협력을 위한 지침2
 - 변하는 개념을 캡슐화 한다.

 훌륭한 추상화를 찾아 추상화에 의존하도록 만드는 것이다. 추상화에 대한 의존은 결합도를 낮추고 결과적으로 대체 가능한 역할로 구성된 협력을 설계할 수 있게 해준다. 따라서 선택하는 추상화의 품질이 캡슐화의 품질을 결정한다.

**캡슐화 다시 살펴보기**
 데이터 은닉이란 오직 외부에 공개된 메소드를 통해서만 객체의 내부에 접근할 수 있게 제한함으로써 객체 내부의 상태 구현을 숨기는 기법을 가리킨다.

 그러나 캡슐화는 데이터 은닉 이상이다. GoF의 디자인 패턴은 설계와 관련된 풍부하고 가치 있는 조언들이 있다. 설계에서 무엇이 변화될 수 있는지 고려하라. 이 접근법은 재설계의 원인에 초점을 맞추는 것과 반대되는 것이다. 설계에 변경을 강요하는 것이 무엇인지에 대해 고려하기보다는 재설계 없이 변경할 수 있는 것이 무엇인지 고려하라. 여기서의 초점은 많은 디자인 패턴의 주제인 변화하는 개념을 캡슐화하는 것이다.

 정리하면 캡슐화란 변하는 어떤 것이든 감추는 것이다.

**03 일관성 있는 기본 정책 구현하기**

변경 분리하기
 일관성 있는 협력을 만들기 위한 첫 번째 단계는 변하는 개념과 변하지 않는 개념을 분리하는 것이다. 

 우리의 목적은 변하지 않는 것과 변하는 것을 분리하는 것이라는 점을 기억하라. 따라서 변하지 않는 ‘규칙’으로부터 변하는 ‘적용조건’을 분리해야 한다.

변경 캡슐화하기
 협력을 일관성 있게 만들기 위해서는 변경을 캡슐화해서 파급효과를 줄여야 한다. 변경을 캡슐화하는 가장 좋은 방법은 변하지 않는 부분으로부터 변하는 부분을 분리하는 것이다. 물론 변하는 부분의 공통점을 추상화하는 것도 잊어서는 안 된다. 이제 변하는 부분이 오직 이 추상화에만 의존하도록 관계를 제한하면 변경을 캡슐화할 수 있게 된다.

협력 패턴 설계하기
 변하는 부분과 변하지 않는 부분을 분리하고, 변하는 부분을 적절히 추상화하고 나면 변하는 부분을 생략한 채 변하지 않는 부분만을 이용해 객체 사이의 협력을 이야기할 수 있다. 추상화만으로 구성한 협력은 추상화를 구체적인 사례로 대체함으로써 다양한 상황으로 확장할 수 있다. 다시 말해서 재사용 가능한 협력 패턴이 선명하게 드러나는 것이다.

추상화 수준에서 협력 패턴 구현하기
구체적인 협력 구현하기
 유사한 기능에 대해 유사한 협력 패턴을 적용하는 것은 객체지향 시스템에서 개념적 무결성을 유지할 수 있는 가장 효과적인 방법이다. 개념적 무결성을 일관성과 동일한 뜻으로 간주해도 무방하다. 시스템이 일관성 이는 몇 개의 협력 패턴으로 구성된다면 시스템을 이해하고, 수정하고, 확장하는 데 필요한 노력과 시간을 아낄 수 있다. 따라서 협력을 설계하고 있다면 항상 기존의 협력 패턴을 따를 수는 없는지 고민하라. 그것이 시스템의 개념적 무결성을 지키는 최선의 방법일 것이다.

협력 패턴에 맞추기

지속적으로 개선하라
 협력을 설계하는 초기 단계에서 모든 요구사항을 미리 예상할 수 없다. 협력은 고정된 것이 아니다. 요구사항의 변경에 따라 협력 역시 지속적으로 개선해야 한다. 중요한 것은 현재의 설계에 맹목적으로 일관성을 맞추는 것이 아니라 달라지는 변경 방향에 맞춰 지속적으로 코드를 개선하려는 의지이다.

패턴을 찾아라
 훌륭한 설계자가 되는 첫 걸음은 변경의 방향을 파악할 수 있는 날카로운 감각을 기르는 것이다. 그리고 이 변경에 탄력적으로 대응할 수 있는 다양한 캡슐화 방법과 설계 방법을 익히는 것 역시 중요하다.

 애플리케이션에서 유사한 기능에 대한 변경이 지속적으로 발생하고 있다면 변경을 캡슐화할 수 있는 적절한 추상화를 찾은 후, 이 추상화에 변하지 않는 공통적인 책임을 할당하라. 현재의 구조가 변경을 캡슐화하기에 적합하지 않다면 코드를 수정하지 않고도 원하는 변경을 수용할 수 있도록 협력과 코드를 리팩터링하라.

참고 : 조영호 지음, 오브젝트

## 내일 할일
 - 알고리즘 문제 풀기
 - Spring JPA 활용편2 강의 듣기