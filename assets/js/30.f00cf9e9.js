(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{414:function(a,s,e){a.exports=e.p+"assets/img/t4gmicro.0353a9d5.png"},558:function(a,s,e){"use strict";e.r(s);var t=e(21),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"swap-memory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#swap-memory"}},[a._v("#")]),a._v(" Swap Memory")]),a._v(" "),t("CenterImage",{attrs:{"image-src":"https://user-images.githubusercontent.com/59357153/152970395-a31c8134-fc89-449f-b4dc-441e03df929c.png"}}),a._v(" "),t("h2",{attrs:{id:"amazon-ec2-t4g-인스턴스"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amazon-ec2-t4g-인스턴스"}},[a._v("#")]),a._v(" Amazon EC2 T4g 인스턴스")]),a._v(" "),t("p",[a._v("EC2 T4g 인스턴스는 "),t("code",[a._v("Arm")]),a._v(" 기반 AWS Gravition2 프로세서로 구동되며 T3 인스턴스에 비해 최대 40% 더 나은 가격 성능을 제공한다. 다양한 상품이 존재하지만 우리에게 허락된 사양은 "),t("code",[a._v("2개의 vCPU")]),a._v("와 "),t("code",[a._v("1GB")]),a._v(" 메모리를 가진 "),t("code",[a._v("t4g.micro")]),a._v(" 뿐이었다.")]),a._v(" "),t("p",[t("img",{attrs:{src:e(414),alt:""}})]),a._v(" "),t("h2",{attrs:{id:"프로젝트-빌드하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#프로젝트-빌드하기"}},[a._v("#")]),a._v(" 프로젝트 빌드하기")]),a._v(" "),t("p",[a._v("현재 "),t("code",[a._v("달록")]),a._v("의 백엔드는 "),t("code",[a._v("Java + Spring Boot")]),a._v("를 활용하여 API 서버를 구축하고 있다. 현재 백엔드 프로젝트는 "),t("code",[a._v("github actions")]),a._v("를 활용한 CI 과정 중 1번, jenkins가 설치된 ec2 내부에서 추가적인 빌드 파일 생성을 위해 1번으로 총 "),t("code",[a._v("2번의 빌드 과정")]),a._v("을 거친다.")]),a._v(" "),t("p",[a._v("github actions는 우리가 관리하는 서버의 리소스를 사용하는 것이 아닌 github 내부에서 관리하는 서버를 통해 빌드가 진행된다. 그렇기 때문에 서버의 사양에 신경쓰지 않고 빌드의 성공 여부에 집중할 수 있다.")]),a._v(" "),t("p",[a._v("하지만 우리가 관리하는 EC2는 입장이 다르다. 현재 사용할 수 있는 서버의 리소스는 한정되어 있으며 jenkins 서버의 운영과 java 프로젝트의 빌드를 함꼐 진행하는 입장에서 "),t("code",[a._v("1GB")]),a._v(" 메모리는 터무니 없이 부족하다. 더군다나 우리는 서버의 사양을 마음대로 조정할 수 없는 위치에 있기 때문에 해결할 수 있는 방법을 모색해야 했다.")]),a._v(" "),t("h2",{attrs:{id:"swap-memory-도입"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#swap-memory-도입"}},[a._v("#")]),a._v(" Swap Memory 도입")]),a._v(" "),t("p",[t("code",[a._v("Swap Memory")]),a._v("는 메인 메모리를 담당하는 "),t("code",[a._v("RAM")]),a._v("이 가득 찬 경우 더 많은 메모리 사용을 위해 디스크 공간의 일부를 대체하여 사용하는 것이다. 이것은 실제 디스크 공간을 메모리 처럼 활용하기 때문에 가상 메모리라고 할 수 있다.")]),a._v(" "),t("p",[a._v("물론 실제 메모리를 사용하는 것이 아닌 말 그대로 디스크 공간을 가상 메모리로 사용하는 것이기 때문에 속도면에서 차이가 날 수 있다. 그럼에도 사용하는 이유는 실제 메모리가 부족한 시점에 시스템에 장애가 발생하는 것 보다 이러한 공간을 추가적으로 사용하여 안정성을 높일 수 있다.")]),a._v(" "),t("h3",{attrs:{id:"swap-memory-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#swap-memory-설정"}},[a._v("#")]),a._v(" Swap Memory 설정")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" fallocate -l 2G /swapfile\n")])])]),t("ul",[t("li",[t("code",[a._v("fallocate")]),a._v(": 특정 이름을 가진 특정 크기의 파일을 만드는 명령어이다. "),t("code",[a._v("-l")]),a._v("을 통해 사이즈를 지정할 수 있다.")]),a._v(" "),t("li",[t("code",[a._v("-l 2G")]),a._v(": 2G 크기의 파일을 할당한다. 다른 단위의 크기를 만들고 있으면 "),t("code",[a._v("K")]),a._v(", "),t("code",[a._v("M")]),a._v(", "),t("code",[a._v("T")]),a._v("등을 사용할 수 있다.")])]),a._v(" "),t("p",[a._v("보통 "),t("code",[a._v("Swap Memory")]),a._v("는 "),t("code",[a._v("RAM 크기의 2배")]),a._v("로 설정하는 것이 좋다고 한다. 우리는 "),t("code",[a._v("1GB")]),a._v("의 메모리를 가지고 있기 때문에 "),t("code",[a._v("2G")]),a._v("로 설정하였다.")]),a._v(" "),t("h3",{attrs:{id:"swapfile-권한-추가"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#swapfile-권한-추가"}},[a._v("#")]),a._v(" swapfile 권한 추가")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("600")]),a._v(" /swapfile\n")])])]),t("p",[a._v("앞서 만든 "),t("code",[a._v("swapfile")]),a._v("의 권한을 수정한다.")]),a._v(" "),t("h3",{attrs:{id:"swap-memory-활성화"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#swap-memory-활성화"}},[a._v("#")]),a._v(" Swap Memory 활성화")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkswap")]),a._v(" /swapfile\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("swapon")]),a._v(" /swapfile\n")])])]),t("h3",{attrs:{id:"시스템-재부팅-시-swap-memory-적용하도록-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#시스템-재부팅-시-swap-memory-적용하도록-설정"}},[a._v("#")]),a._v(" 시스템 재부팅 시 Swap Memory 적용하도록 설정")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/fstab\n")])])]),t("p",[a._v("아래 내용을 추가한다.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/swapfile swap swap defaults "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("h2",{attrs:{id:"정리"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#정리"}},[a._v("#")]),a._v(" 정리")]),a._v(" "),t("p",[a._v("이제 한정된 메인 메모리와 추가적인 가상 메모리를 통해 프로젝트 빌드를 성공적으로 진행할 수 있다. 단순히 제품 사양을 올리는 것 보다 Swap Memory를 통해 해결하는 방법에 대해 익힐 수 있었으며 보다 더 안정적인 서버 운영을 진행할 수 있도록 세팅할 수 있는 계기가 되었다.")]),a._v(" "),t("h3",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[a._v("#")]),a._v(" References.")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://aws.amazon.com/ko/blogs/korea/amazon-ec2-t4g-instance-seoul-region/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Amazon EC2 T4g 인스턴스, 서울 리전 출시 (6월 30일까지 무료 사용 가능)"),t("OutboundLink")],1),t("br"),a._v(" "),t("a",{attrs:{href:"https://scbyun.com/984",target:"_blank",rel:"noopener noreferrer"}},[a._v("[리눅스] 스왑 메모리(Swap Memory) 메모리"),t("OutboundLink")],1),t("br"),a._v(" "),t("a",{attrs:{href:"https://facerain.club/swap-memory/",target:"_blank",rel:"noopener noreferrer"}},[a._v("[Tip] Ubuntu 20.04 Swap 메모리 설정하기"),t("OutboundLink")],1)]),a._v(" "),t("TagLinks")],1)}),[],!1,null,null,null);s.default=r.exports}}]);