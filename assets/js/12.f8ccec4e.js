(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{422:function(t,s,a){t.exports=a.p+"assets/img/1.01c40277.png"},423:function(t,s,a){t.exports=a.p+"assets/img/2.acd37350.png"},424:function(t,s,a){t.exports=a.p+"assets/img/3.bca60eb7.png"},425:function(t,s,a){t.exports=a.p+"assets/img/4.adb7f3a4.png"},696:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"ğŸš—-á„á…¡á„€á…³á†«á„á…¡á„€á…³á†«-á„ƒá…©á†¼á„‰á…µá„‰á…¥á†¼-á„‹á…µá„‰á…²-á„’á…¢á„€á…§á†¯á„’á…¡á„€á…µ-1"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš—-á„á…¡á„€á…³á†«á„á…¡á„€á…³á†«-á„ƒá…©á†¼á„‰á…µá„‰á…¥á†¼-á„‹á…µá„‰á…²-á„’á…¢á„€á…§á†¯á„’á…¡á„€á…µ-1"}},[t._v("#")]),t._v(" ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (1)")]),t._v(" "),n("blockquote",[n("p",[t._v("ğŸ‘‰ "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (1) - synchronized"),n("OutboundLink")],1),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-2.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (2) - Pessimistic Lock"),n("OutboundLink")],1),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-3.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (3) - Optimistic Lock"),n("OutboundLink")],1),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"https://hyeonic.github.io/spring/concurrency/concurrency-4.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸš— ì°¨ê·¼ì°¨ê·¼ ë™ì‹œì„± ì´ìŠˆ í•´ê²°í•˜ê¸° (4) - Named Lock"),n("OutboundLink")],1),t._v(" "),n("br")])]),t._v(" "),n("blockquote",[n("p",[t._v("ì‘ì„±ì— ì‚¬ìš©ëœ ì˜ˆì œ ì½”ë“œëŠ” "),n("a",{attrs:{href:"https://github.com/hyeonic/blog-code/tree/main/concurrency-synchronized",target:"_blank",rel:"noopener noreferrer"}},[t._v("concurrency-synchronized"),n("OutboundLink")],1),t._v("ì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.")])]),t._v(" "),n("p",[t._v("ì„œë²„ ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ì—¬ëŸ¬ ìš”ì²­ì—ì„œ ë™ì‹œì— ê³µìœ  ìì›ì„ í™œìš©í•˜ëŠ” ê²½ìš° ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. íŠ¹íˆ Javaë¥¼ í™œìš©í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° ë©€í‹° ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„° ì •í•©ì„±ì„ ìœ„í•´ì„œëŠ” ê³µìœ  ìì›ì—\nëŒ€í•œ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.")]),t._v(" "),n("p",[t._v("ë™ì‹œì„± ì´ìŠˆ í•´ê²°ì„ ìœ„í•´ì„œëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì´ ì¡´ì¬í•œë‹¤. ìš”ì²­ ìŠ¤ë ˆë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•˜ê±°ë‚˜ ë¹„ê´€ì  ë½ê³¼ ë‚™ê´€ì  ë½ì„ í™œìš©í•˜ê±°ë‚˜ ì™¸ë¶€ì˜ íŠ¹ì • ì €ì¥ì†Œì— ë½ì— ëŒ€í•œ ê´€ë¦¬ë¥¼ í†µí•´ ê³µìœ  ìì›ì„ ë™ì‹œì— ì ìœ í•˜ì§€\nëª»í•˜ê²Œ í•˜ëŠ” ë“± ë‹¤ì–‘í•œ ë°©ë²•ì„ í†µí•´ ë§‰ì„ ìˆ˜ ìˆë‹¤. ì´ë²ˆ ì‹œê°„ì—ëŠ” ê·¸ ì¤‘ì—ì„œë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ìì›ì— ì ‘ê·¼í•˜ì—¬ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•œë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"á„‹á…¨á„Œá…¦-á„á…©á„ƒá…³"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„‹á…¨á„Œá…¦-á„á…©á„ƒá…³"}},[t._v("#")]),t._v(" ì˜ˆì œ ì½”ë“œ")]),t._v(" "),n("p",[t._v("ë¨¼ì € ì´ë²ˆ ê¸€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë³´ì. ì•„ë˜ëŠ” íŠ¹ì • ìƒí’ˆì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ Product ì—”í‹°í‹°ì´ë‹¤. ProductëŠ” ì´ë¦„ê³¼ í•œì •ëœ ê°œìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” "),n("code",[t._v("quantity")]),t._v("ë¥¼ ê°€ì§€ê³  ìˆë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Entity")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Id")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Column")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Column")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"quantity"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quantity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrease")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quantity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" quantity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ìˆ˜ëŸ‰ì€ 0ê°œ ë¯¸ë§Œì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quantity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// getter...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("code",[t._v("decrease()")]),t._v(" ë©”ì„œë“œë¥¼ í†µí•´ ìˆ˜ëŸ‰ì„ ê°ì†Œ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[t._v("Product ì—”í‹°í‹° ì¡°ì‘ì„ ìœ„í•œ "),n("code",[t._v("ProductRepository")]),t._v("ì´ë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductRepository")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JpaRepository")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ì´ì œ ìƒí’ˆì„ êµ¬ë§¤í–ˆë‹¤ê³  ê°€ì •í•˜ê³  ìˆ˜ëŸ‰ì„ ê°ì†Œ ì‹œí‚¤ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ "),n("code",[t._v("ProductService")]),t._v("ì— ì‘ì„±í•œë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductRepository")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductRepository")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productRepository "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foundProduct "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProduct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        foundProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrease")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProduct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElseThrow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NoSuchElementException")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ë¹„êµì  ê°„ë‹¨í•œ ë¡œì§ì„ ê°€ì§€ê³  ìˆë‹¤. íŠ¹ì • idë¥¼ ê°€ì§„ Productë¥¼ ì¡°íšŒí•˜ê³  ìˆ˜ëŸ‰ì„ ê°ì†Œì‹œí‚¨ë‹¤. ë‘ ê³¼ì •ì€ ì¼ë ¨ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ì´ë£¨ì–´ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì— "),n("code",[t._v("@Transactional")]),t._v("ì„ í™œìš©í•œë‹¤.")]),t._v(" "),n("p",[t._v("ì¤€ë¹„ëŠ” ëë‚¬ë‹¤. ì´ì œ ë™ì‹œì„± ì´ìŠˆë¥¼ ë°œìƒì‹œì¼œ ë¬¸ì œë¥¼ í™•ì¸í•´ë³¸ë‹¤. ì•„ë˜ëŠ” ë™ì‹œì„± ì´ìŠˆ í™•ì¸ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œì´ë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootTest")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@DisplayNameGeneration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReplaceUnderscores")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductServiceTest")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" ë™ì‹œì—_100ê°œì˜_ìƒí’ˆì„_êµ¬ë§¤í•œë‹¤"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" product "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ì¹˜í‚¨"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" executorService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" countDownLatch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            executorService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("await")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" actual "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElseThrow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("actual"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQuantity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEqualTo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("countDown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ìì„¸í•œ ì½”ë“œ ì„¤ëª…ì€ ìƒëµí•œë‹¤. í•µì‹¬ì€ ìˆœê°„ì ìœ¼ë¡œ 100ê°œì˜ ìš”ì²­ì„ ë³´ë‚¸ ë’¤ 100ê°œì˜ ìš”ì²­ì´ ëª¨ë‘ ëë‚  ë•Œ ê¹Œì§€ "),n("code",[t._v("await()")]),t._v("í•œë‹¤. ì´í›„ ìˆ˜ëŸ‰ì„ ì¡°íšŒí•œ ë’¤ ëª‡ ê°œì˜ ìƒí’ˆì´ íŒë§¤ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.")]),t._v(" "),n("p",[t._v("ìƒí’ˆ 100ê°œë¥¼ êµ¬ë§¤í•˜ê¸¸ ì›í–ˆì§€ë§Œ ë¶ˆí–‰í•˜ê²Œë„ ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(422),alt:"img.png"}})]),t._v(" "),n("p",[t._v("100ê°œ ì¤‘ ê³ ì‘ 11ê°œì˜ ìƒí’ˆë§Œ ì •ìƒì ìœ¼ë¡œ ìˆ˜ëŸ‰ì´ ì¤„ì–´ë“  ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì™œ ì´ëŸ° ì¼ì´ ë°œìƒí•˜ëŠ” ê²ƒì¼ê¹Œ?")]),t._v(" "),n("h2",{attrs:{id:"á„†á…®á†«á„Œá…¦-á„‹á…¯á†«á„‹á…µá†«-á„‡á…®á†«á„‰á…¥á†¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„†á…®á†«á„Œá…¦-á„‹á…¯á†«á„‹á…µá†«-á„‡á…®á†«á„‰á…¥á†¨"}},[t._v("#")]),t._v(" ë¬¸ì œ ì›ì¸ ë¶„ì„")]),t._v(" "),n("p",[t._v("ë¬¸ì œì˜ í•µì‹¬ì€ "),n("code",[t._v("quantity")]),t._v("ë¼ëŠ” "),n("code",[t._v("ê³µìœ  ìì›")]),t._v("ì— ì—¬ëŸ¬ ìš”ì²­, ì¦‰ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ìˆœì°¨ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì—¬ ìˆ˜ëŸ‰ì„ ê°ì†Œì‹œí‚¤ê¸¸ ê¸°ëŒ€í•˜ì§€ë§Œ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì˜ë„ì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šì„\nê²ƒì´ë‹¤. ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(423),alt:"img.png"}})]),t._v(" "),n("p",[t._v("ë‘ê°œì˜ ìš”ì²­ì´ ë“¤ì–´ì™€ ìˆ˜ëŸ‰ì´ 98ë¡œ ê°ì†Œí•˜ê¸¸ ê¸°ëŒ€ í–ˆì§€ë§Œ ìì›ì— ë™ì‹œ ì ‘ê·¼í•˜ëŠ” ì‹œì ì— ê°™ì€ ìˆ˜ëŸ‰ì„ ì½ê²Œ ë˜ë¯€ë¡œ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì‹œì ì— "),n("code",[t._v("ê°±ì‹  ì†ì‹¤")]),t._v("ì´ ë°œìƒí•˜ê²Œ ëœë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"synchronized"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#synchronized"}},[t._v("#")]),t._v(" synchronized")]),t._v(" "),n("p",[t._v("ì´ê²ƒì€ Javaì˜ "),n("code",[t._v("synchronized")]),t._v(" í‚¤ì›Œë“œë¥¼ í†µí•´ "),n("code",[t._v("ì„ê³„ ì˜ì—­")]),t._v("ì„ ì„¤ì •í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤. "),n("code",[t._v("synchronized")]),t._v("ë¥¼ í™œìš©í•˜ë©´ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ê³µìœ  ìì›ì„ ì‚¬ìš©í•  ë•Œ ìµœì´ˆì— ì ‘ê·¼í•œ ìŠ¤ë ˆë“œë¥¼ ì œì™¸í•˜ê³ \në‚˜ë¨¸ì§€ ìŠ¤ë ˆë“œëŠ” ì ‘ê·¼í•  ìˆ˜\nì—†ë„ë¡ ì œí•œí•  ìˆ˜ ìˆë‹¤. Javaì—ì„œëŠ” Monitor ë„êµ¬ë¥¼ í†µí•´ ê°ì²´ì— Lockì„ ê±¸ì–´ "),n("code",[t._v("ìƒí˜¸ë°°ì œ")]),t._v("ë¥¼ í•  ìˆ˜ ìˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ìƒí˜¸ë°°ì œ ê¸°ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.")]),t._v(" "),n("blockquote",[n("p",[t._v("ì„ê³„ ì˜ì—­ì´ë€, ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì˜ì—­ì„ ì¼ì»«ëŠ”ë‹¤.")])]),t._v(" "),n("p",[t._v("í•µì‹¬ì€ "),n("code",[t._v("synchronized")]),t._v("ë¥¼ ì‚¬ìš©í•˜ë©´ ì˜¤ì§ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œì—ì„œë§Œ "),n("code",[t._v("ì„ê³„ ì˜ì—­")]),t._v("ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ì ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foundProduct "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProduct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        foundProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrease")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProduct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElseThrow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NoSuchElementException")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ë©”ì„œë“œ ì„ ì–¸ë¶€ì— "),n("code",[t._v("synchronized")]),t._v(" í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•œë‹¤. í•´ë‹¹ í‚¤ì›Œë“œë¥¼ í†µí•´ ì´ ë©”ì„œë“œë¥¼ ê°€ì§„ ê°ì²´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ê¸°í™” ê³¼ì •ì„ ì§„í–‰í•œë‹¤. "),n("code",[t._v("ProductService")]),t._v(" ê°™ì€ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í„´ ë°©ì‹ìœ¼ë¡œ\nìƒì„±ë˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ê°ì²´ì˜ ë©”ì„œë“œëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤. ì´ ë°–ì—ë„ "),n("code",[t._v("synchronized")]),t._v("ë¥¼ ì–´ë””ì—, ì–´ë–¤ ë©”ì„œë“œì— ëª…ì‹œí•˜ëƒì— ë”°ë¼ ë‹¤ì–‘í•˜ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("p",[t._v("ì ì´ì œ ëª¨ë“  ë™ì‹œì„± ì´ìŠˆëŠ” í•´ê²°ë˜ì—ˆì„ ê²ƒì´ë‹¤. ë‹¤ì‹œ í•œ ë²ˆ ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë³´ì.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(424),alt:"img.png"}})]),t._v(" "),n("p",[t._v("ì•„ì‰½ê²Œë„ ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤. ë¶„ëª… "),n("code",[t._v("synchronized")]),t._v("ë¥¼ í†µí•´ ì„ê³„ ì˜ì—­ê¹Œì§€ ì„¤ì •í–ˆëŠ”ë° ì™œ ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí• ê¹Œ?")]),t._v(" "),n("h2",{attrs:{id:"á„†á…®á†«á„Œá…¦-á„‹á…¯á†«á„‹á…µá†«-á„ƒá…¡á„‰á…µ-á„‡á…®á†«á„‰á…¥á†¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„†á…®á†«á„Œá…¦-á„‹á…¯á†«á„‹á…µá†«-á„ƒá…¡á„‰á…µ-á„‡á…®á†«á„‰á…¥á†¨"}},[t._v("#")]),t._v(" ë¬¸ì œ ì›ì¸ ë‹¤ì‹œ ë¶„ì„")]),t._v(" "),n("p",[t._v("ë¬¸ì œì˜ ì›ì¸ì€ "),n("code",[t._v("@Transactional")]),t._v("ì˜ íŠ¹ìˆ˜í•œ êµ¬ì¡° ë•Œë¬¸ì´ë‹¤. Springì€ ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡ì‹œë¥¼ í†µí•´ ë¶€ê°€ê¸°ëŠ¥ì¸ íŠ¸ëœì­ì…˜ì„ êµ¬í˜„í•œë‹¤. ê°„ë‹¨í•œ pseudocodeë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductServiceProxy")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransaction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1) íŠ¸ëœì­ì…˜ ì‹œì‘")]),t._v("\n\n        stockService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2) ì„ê³„ ì˜ì—­ ")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("endTransaction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3 íŠ¸ëœì­ì…˜ ë")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ì—¬ëŸ¬ ìŠ¤ë ˆë“œëŠ” ë™ì‹œì— íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•  ìˆ˜ ìˆë‹¤. ì´í›„ ì„ê³„ ì˜ì—­ì— ì§„ì…í•˜ë©´ ìˆœì°¨ì ìœ¼ë¡œ "),n("code",[t._v("purchase()")]),t._v(" ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•  ê²ƒì´ë‹¤. í•˜ì§€ë§Œ "),n("code",[t._v("purchase()")]),t._v("ëŠ” ë°”ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤. "),n("code",[t._v("3")]),t._v("ì—\nì ‘ê·¼í–ˆì„ ë•Œ ë¹„ë¡œì†Œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê²°êµ­ ë°˜ì˜ ì´ì „ì— ì„ê³„ ì˜ì—­ì— ì ‘ê·¼í•˜ëŠ” ìŠ¤ë ˆë“œ ë•Œë¬¸ì— "),n("code",[t._v("ê°±ì‹¤ ì†ì‹¤")]),t._v("ì´ ë™ì¼í•˜ê²Œ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.")]),t._v(" "),n("p",[t._v("í•´ê²° ë°©ë²•ì€ íŠ¸ëœì­ì…˜ì˜ ë²”ìœ„ë³´ë‹¤ ì„ê³„ ì˜ì—­ì˜ ë²”ìœ„ë¥¼ ë” ë„“ê²Œ ê°€ì ¸ê°€ëŠ” ê²ƒì´ë‹¤. "),n("code",[t._v("ProductService")]),t._v("ë³´ë‹¤ ìƒìœ„ ê³„ì¸µì—ì„œ ì„ê³„ ì˜ì—­ì„ ì§€ì •í•œ ë’¤ "),n("code",[t._v("purchase()")]),t._v("ë¥¼ í˜¸ì¶œí•œë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SynchronizedProductService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SynchronizedProductService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductService")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        productService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("ìƒìœ„ ê³„ì¸µì„ ì¶”ê°€í•œ ì´ìœ ëŠ” ê°™ì€ ê°ì²´ ë‚´ì—ì„œ ë‚´ë¶€ í˜¸ì¶œì„ ì§„í–‰í•  ê²½ìš° í”„ë¡ì‹œ ë¡œì§ì„ ì •ìƒì ìœ¼ë¡œ íƒ€ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì´ì— ëŒ€í•œ í‚¤ì›Œë“œë¡œ íŠ¸ëœì­ì…˜ ë‚´ë¶€ í˜¸ì¶œì— ëŒ€í•´ ì•Œì•„ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.")])]),t._v(" "),n("p",[t._v("í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ìˆ˜ì •í•œë‹¤.")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootTest")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@DisplayNameGeneration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReplaceUnderscores")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductServiceTest")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" ë™ì‹œì—_100ê°œì˜_ìƒí’ˆì„_êµ¬ë§¤í•œë‹¤"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" product "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ì¹˜í‚¨"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" executorService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" countDownLatch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            executorService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("await")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" actual "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElseThrow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("actual"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQuantity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEqualTo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),t._v(" countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            synchronizedProductService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purchase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            countDownLatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("countDown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(425),alt:"img.png"}})]),t._v(" "),n("p",[t._v("í…ŒìŠ¤íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"á„Œá…¥á†¼á„…á…µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#á„Œá…¥á†¼á„…á…µ"}},[t._v("#")]),t._v(" ì •ë¦¬")]),t._v(" "),n("p",[t._v("ì§€ê¸ˆ ê¹Œì§€ "),n("code",[t._v("synchronized")]),t._v(" í‚¤ì›Œë“œë¥¼ í†µí•´ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ë‹¤. "),n("code",[t._v("synchronized")]),t._v("ëŠ” ì†ì‰½ê²Œ ì ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ë‹¤ì¤‘ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì—ì„œëŠ” ì í•©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ì´ê²ƒì€\ní•˜ë‚˜ì˜ ì„œë²„ ë‚´ì—ì„œë§Œ ë™ì‹œì„± ì´ìŠˆë¥¼ ë§‰ì•„ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. ê²°êµ­ ë‹¤ìˆ˜ì˜ ì„œë²„ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¼ëŠ” ê³µìœ  ìì›ì— ì ‘ê·¼ì„ ì œì–´í•˜ëŠ”ë°ëŠ” ì í•©í•˜ì§€ ì•Šì€ ë°©ì‹ì´ë‹¤.")]),t._v(" "),n("p",[t._v("ë§Œì•½ ìŠ¤ì¼€ì¼ ì•„ì›ƒì„ ì§„í–‰í•˜ì§€ ì•Šê³  í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ëª¨ë“  ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°ì—ëŠ” "),n("code",[t._v("synchronized")]),t._v("ëŠ” ì¢‹ì€ ëŒ€ì•ˆì´ ë  ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ "),n("code",[t._v("@Transactional")]),t._v(" í•¨ê»˜ ì‚¬ìš©í•  ë•ŒëŠ” í”„ë¡ì‹œ êµ¬ì¡°ì— ëŒ€í•´\nì—¼ë‘í•´ë‘ê³  ì ì ˆíˆ ì ìš©í•´ì•¼ í•œë‹¤. ë‹¤ìŒ ì‹œê°„ì—ëŠ” ë¹„ê´€ì  ë½ì„ í†µí•´ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•œë‹¤.")]),t._v(" "),n("h2",{attrs:{id:"references"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References.")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://tecoble.techcourse.co.kr/post/2021-10-23-java-synchronize/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ”’ Java ë¡œ ë™ê¸°í™”ë¥¼ í•´ë³´ì!"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://www.inflearn.com/course/%EB%8F%99%EC%8B%9C%EC%84%B1%EC%9D%B4%EC%8A%88-%EC%9E%AC%EA%B3%A0%EC%8B%9C%EC%8A%A4%ED%85%9C",target:"_blank",rel:"noopener noreferrer"}},[t._v("ì¬ê³ ì‹œìŠ¤í…œìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë™ì‹œì„±ì´ìŠˆ í•´ê²°ë°©ë²•"),n("OutboundLink")],1)]),t._v(" "),n("TagLinks")],1)}),[],!1,null,null,null);s.default=e.exports}}]);